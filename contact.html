<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ç–∞–∫—Ç—ã - –ö–§ "–ê“ö –ë–ï–†–ï–ù"</title>
    <meta name="description" content="–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏: +7 (7242) 401-701, kf.akberen@mail.ru. –ê–¥—Ä–µ—Å: –≥ –ö—ã–∑—ã–ª–æ—Ä–¥–∞, –ë–µ—Ä–∫–µ —Ö–∞–Ω 46.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="assets/logo/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="menu-overlay"></div>

    <header class="header">
        <div class="container header-container">
            <a href="index.html" class="logo">
                <img src="assets/logo/logo-placeholder.svg" alt="–õ–æ–≥–æ—Ç–∏–ø –ê“ö –ë–ï–†–ï–ù" class="logo-img">
                <span>–ê“ö –ë–ï–†–ï–ù</span>
            </a>
            <nav class="nav" id="nav-menu">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="about.html" class="nav-link">–û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
                    <li><a href="services.html" class="nav-link">–£—Å–ª—É–≥–∏</a></li>
                    <li><a href="partners.html" class="nav-link">–ü–∞—Ä—Ç–Ω–µ—Ä—ã</a></li>
                    <li><a href="machines.html" class="nav-link">–û—Å–Ω–∞—â–µ–Ω–∏–µ</a></li>
                    <li><a href="team.html" class="nav-link">–ö–æ–º–∞–Ω–¥–∞</a></li>
                    <li><a href="gallery.html" class="nav-link">–ì–∞–ª–µ—Ä–µ—è</a></li>
                    <li><a href="contact.html" class="nav-link active">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </nav>
            <button class="burger" id="burger-menu" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">–°–≤—è–∑—å —Å –Ω–∞–º–∏</h2>
                    <div class="section-decorator"></div>
                </div>

                <div class="contact-grid">
                    <div class="card-glow contact-form-card">
                        <h3 class="card-title">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
                        <form action="https://formspree.io/f/xovbvved" method="POST" class="contact-form">
                            <div class="form-group">
                                <label for="name">–í–∞—à–µ –∏–º—è</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">–í–∞—à Email</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="message">–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
                                <textarea id="message" name="message" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </form>
                    </div>

                    <div class="contact-details">
                        <div class="card-glow contact-details-card">
                            <h3 class="card-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                            <p><strong>Email:</strong> <a href="mailto:kf.akberen@mail.ru">kf.akberen@mail.ru</a></p>
                            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <a href="tel:+77242401701">+7 (7242) 401-701</a></p>

                            <h4 style="margin-top: 1.5rem; color: var(--color-primary);">–°–æ—Ü—Å–µ—Ç–∏</h4>
                            <div class="social-links-contact">
                                <a href="https://www.facebook.com/profile.php?id=100023423955883" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                                <a href="https://www.instagram.com/profsoyuz_kzl?igsh=MXJhZHZzcmk2M3lsdA%3D%3D" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-glow office-map-card">
                    <div class="office-map-iframe">
                        <iframe
                            src="https://yandex.ru/map-widget/v1/-/CDUzFAfG"
                            width="100%"
                            height="100%"
                            frameborder="0"
                            allowfullscreen="true"
                            style="position:relative; border-radius: var(--border-radius);">
                        </iframe>
                    </div>
                    <div class="office-map-desc">
                        <h3 class="card-title">–ù–∞—à –æ—Ñ–∏—Å</h3>
                        <p>–≥ –ö—ã–∑—ã–ª–æ—Ä–¥–∞, –ë–µ—Ä–∫–µ —Ö–∞–Ω 46</p>
                    </div>
                </div>

            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; <span id="current-year"></span> –ö–§ "–ê“ö –ë–ï–†–ï–ù". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- –í–ê–ñ–ù–û: type="module" –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å import -->
    <script type="module">
        // 1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ Firebase (–ø—Ä—è–º–æ —Å —Å–µ—Ä–≤–µ—Ä–∞ Google)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        // 2. –í–ê–®–ò –ù–ê–°–¢–†–û–ô–ö–ò (–¢–æ, —á—Ç–æ –≤—ã —Å–∫–∏–Ω—É–ª–∏)
        const firebaseConfig = {
            apiKey: "AIzaSyANLASwk1WNbrmjV2YsF8ZGlnIAEQudPUA",
            authDomain: "akberen-site.firebaseapp.com",
            projectId: "akberen-site",
            storageBucket: "akberen-site.firebasestorage.app",
            messagingSenderId: "794903039108",
            appId: "1:794903039108:web:32d1d4aaf26d6117a606d1",
            measurementId: "G-C7G8W4WZ7Y"
        };

        // 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram (–ù–ï –ó–ê–ë–£–î–¨–¢–ï –í–ü–ò–°–ê–¢–¨!)
        const TELEGRAM_TOKEN = '8266962080:AAFV6JHSCmm993UjLVMdlnlBFDNwzz8tbww';
        const TELEGRAM_CHAT_ID = '7346456383';

        // 5. –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ç–µ–ø–µ—Ä—å –æ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è)
        async function sendMessage(event) {
            if(event) event.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            const btn = document.querySelector('.btn-primary');

            if(!name || !email || !message) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");
                return;
            }

            btn.innerText = "–û—Ç–ø—Ä–∞–≤–∫–∞...";
            btn.disabled = true;

            const dateNow = new Date();

            // --- TELEGRAM ---
            const textForTelegram = `üî• <b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞!</b>\nüë§ ${name}\nüìß ${email}\nüí¨ ${message}`;
            let telegramPromise = Promise.resolve();
            if (TELEGRAM_TOKEN !== '–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê') {
                const urlTelegram = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodeURIComponent(textForTelegram)}&parse_mode=html`;
                telegramPromise = fetch(urlTelegram);
            }

            // --- FIREBASE (–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É) ---
            try {
                await addDoc(collection(db, "messages"), {
                    name: name,
                    email: email,
                    message: message,
                    date: dateNow
                });

                // –ñ–¥–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –≤ —Ç–µ–ª–µ–≥—Ä–∞–º (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
                await telegramPromise;

                alert("–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!");
                document.getElementById('name').value = '';
                document.getElementById('email').value = '';
                document.getElementById('message').value = '';
                btn.innerText = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å";
                btn.disabled = false;

            } catch (e) {
                console.error("–û—à–∏–±–∫–∞: ", e);
                alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
                btn.innerText = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å";
                btn.disabled = false;
            }
        }

        // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É (—Ç–∞–∫ –∫–∞–∫ type="module" –∏–∑–æ–ª–∏—Ä—É–µ—Ç –∫–æ–¥, –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ addEventListener)
        const formBtn = document.querySelector('.btn-primary');
        if(formBtn) {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π onclick –∏–∑ HTML, –µ—Å–ª–∏ –æ–Ω —Ç–∞–º –±—ã–ª, –∏ —Å—Ç–∞–≤–∏–º –Ω–æ–≤—ã–π
            formBtn.onclick = null;
            formBtn.addEventListener('click', sendMessage);
        }
    </script>
</body>
</html>
